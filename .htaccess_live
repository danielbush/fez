RewriteEngine   on
#RewriteCond %{REMOTE_ADDR} !^130.102.4.1$
#RewriteRule     (.*)$                                         maintenance.html

# Disallow request of this file
RewriteRule ^\.htaccess$ - [F]
RewriteRule ^logs/.*\.log$ - [F]

# Robots.txt
RewriteRule ^robots.txt$         robots.php [L]

# Student Thesis Submission simple URL CK added 18/8/2008
RewriteRule     ^rhdsubmission*$                 workflow/new.php?xdis_id=187&pid=UQ:152694&custom_view_pid=UQ:11407&wft_id=292&cat=select_workflow

# SBS Professional Doctorate Thesis Submission simple URL CK added 16/10/2008
RewriteRule     ^sbslodge*$                 workflow/new.php?xdis_id=187&pid=UQ:155729&custom_view_pid=UQ:11407&wft_id=295&cat=select_workflow

# Show all page so GSA Crawlers etc can traverse this and simply exclude all /list* pages from traversal or indexing
RewriteRule     ^showall/(.*)$                                         list.php?cat=quick_filter&sort_by=searchKeycore_17&sort_order=1&search_keys[0]=$1 [L,QSA]

# DIGILIB CUSTOM VIEW
RewriteCond %{HTTP_HOST}   digilib.library.uq.edu.au
RewriteRule ^index.php$         index.php?custom_view_pid=UQ:3682&community_pid=UQ:3682 [L]
RewriteCond %{HTTP_HOST}   digilib.library.uq.edu.au
RewriteRule     ^collection/([A-Za-z]+):([0-9]+)$                   list.php?custom_view_pid=UQ:3682&collection_pid=$1:$2 [L,QSA]
RewriteCond %{HTTP_HOST}   digilib.library.uq.edu.au
RewriteRule     ^collection/([A-Za-z]+):([0-9]+)/(.+)$              list.php?custom_view_pid=UQ:3682&collection_pid=$1:$2&$3 [L,QSA]
RewriteCond %{HTTP_HOST}   digilib.library.uq.edu.au
RewriteRule     ^community/([A-Za-z]+):([0-9]+)$                   / [R=301,L]
RewriteCond %{HTTP_HOST}   digilib.library.uq.edu.au
RewriteRule     ^community/([A-Za-z]+):([0-9]+)/(.+)$              / [R=301,L]
RewriteCond %{HTTP_HOST}   digilib.library.uq.edu.au
RewriteRule     ^view/([A-Za-z]+):([0-9]+)(\?.*)*$                  view.php?custom_view_pid=UQ:3682&pid=$1:$2$3 [L]
RewriteCond %{HTTP_HOST}   digilib.library.uq.edu.au
RewriteRule     ^list/([^/]*)/([^/]*)(/?)$                          list.php?custom_view_pid=UQ:3682&browse=$1&value=$2 [L,QSA]
RewriteCond %{HTTP_HOST}   digilib.library.uq.edu.au
RewriteRule     ^list/(.*)$                                         list.php?custom_view_pid=UQ:3682&$1 [L,QSA]
RewriteCond %{HTTP_HOST}   digilib.library.uq.edu.au
RewriteRule     ^eserv/([A-Za-z]+):([0-9]+)/(.+)(/.+)*$             eserv.php?pid=$1:$2&dsID=$3$4 [L,QSA]
RewriteCond %{HTTP_HOST}   digilib.library.uq.edu.au
RewriteRule     ^stream/([A-Za-z]+):([0-9]+)/(.+)(/.+)*$             eserv.php?pid=$1:$2&stream=1&dsID=$3$4 [L,QSA]
RewriteCond %{HTTP_HOST}   digilib.library.uq.edu.au
RewriteRule     ^js/(.*).js$                                       	min.php?js/$1.js [L,QSA]
RewriteCond %{HTTP_HOST}   digilib.library.uq.edu.au
RewriteRule     ^(.*)$                                         		$1?custom_view_pid=UQ:3682 [L,QSA]


RewriteRule     ^view/([A-Za-z]+):([0-9]+)(\?.*)*$                  view.php?pid=$1:$2$3 [L,QSA]
RewriteRule     ^eserv/([A-Za-z]+):([0-9]+)/(.+?)(/.*)*$            eserv.php?pid=$1:$2&dsID=$3&qs=$4 [L]
RewriteRule     ^community/([A-Za-z]+):([0-9]+)$	                list.php?community_pid=$1:$2 [L,QSA]
RewriteRule     ^community/([A-Za-z]+):([0-9]+)/(.+)$	            list.php?community_pid=$1:$2&$3 [L,QSA]
RewriteRule     ^collection/([A-Za-z]+):([0-9]+)$                   list.php?collection_pid=$1:$2 [L,QSA]
RewriteRule     ^collection/([A-Za-z]+):([0-9]+)/(.+)$              list.php?collection_pid=$1:$2&$3 [L,QSA]
RewriteRule     ^list/([^/]*)/([^/]*)(/?)$                          list.php?browse=$1&value=$2 [L,QSA]
RewriteRule     ^list/(.*)$                                         list.php?$1 [L,QSA]
RewriteRule     ^rid_citation_count_history_([A-Za-z]+):([0-9]+)$              rid_citation_count_history.php?pid=$1:$2 [L,QSA]
RewriteRule     ^rid_citation_count_history_([A-Za-z]+):([0-9]+)_graph.?(.*)$   rid_citation_count_history_graph.php?pid=$1:$2&ext=$3 [L,QSA]
RewriteRule     ^scopus_citation_count_history_([A-Za-z]+):([0-9]+)$              scopus_citation_count_history.php?pid=$1:$2 [L,QSA]
RewriteRule     ^scopus_citation_count_history_([A-Za-z]+):([0-9]+)_graph.?(.*)$   scopus_citation_count_history_graph.php?pid=$1:$2&ext=$3 [L,QSA]
RewriteRule     ^js/(.*).js$                                       	min.php/js/$1.js [L,QSA]
RewriteRule     ^stream/([A-Za-z]+):([0-9]+)/(.+?)(/.*)*$           eserv.php?pid=$1:$2&dsID=$3&qs=$4/stream=1 [L]

RewriteRule     ^era-na/([A-Za-z]+):([0-9]+)/view.pdf$              era/requested_attachment_unavailable.pdf [L]  # ERA -- can delete this rule once ERA is over.

#TESTING SEND EVERYTHING TO index.php for user defined author my pubs aliases etc
RewriteCond     %{REQUEST_FILENAME} -s [OR]
RewriteCond     %{REQUEST_FILENAME} -l [OR]
RewriteCond     %{REQUEST_FILENAME} -d
RewriteRule     ^.*$ - [NC,L]
RewriteRule     ^.*$ index.php [NC,L]

# Serve a 404 error page on attempts to access .svn directories
RedirectMatch 404 /\.svn(/|$)
