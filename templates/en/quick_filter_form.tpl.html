<form name="custom_filter_form" action="list.php" method="get">
<input type="hidden" name="cat" value="quick_filter" />

<div class="outline">

<div id="custom_filter_form1" {get_display_style element_name="custom_filter_form"}>

  <div class="{if $options.searchKey0 != ''}default-search-used{else}default{/if} quick_search_item">
    All Fields: <br />
	<input id="search_keys[0]" type="text" name="search_keys[0]" maxlength="255" size="35" value="{$options.searchKey0}" />
  </div>
{section name="i" loop=$search_keys}
  {assign var="search_key_name" value='searchKey'|cat:$search_keys[i].sek_id}
  {assign var ="last_key" value=$options.$search_key_name}  
  <div class="{if $last_key != 'ALL' && $last_key != ''}default-search-used{else}default{/if} quick_search_item">
  {if $search_keys[i].sek_alt_title}{$search_keys[i].sek_alt_title}{else}{$search_keys[i].sek_title}{/if}:<br/>
  {if $search_keys[i].sek_html_input != 'text' &&  $search_keys[i].sek_html_input != 'textarea'}
    <script language="JavaScript" type="text/javascript">
    <!--
    //            search_keys[search_keys.length] = new Option('search_keys[{$search_keys[i].sek_id}]{if $search_keys[i].sek_html_input == 'multiple'}[]{/if}', '{$search_keys[i].sek_title}');
    //            required_search_keys[required_search_keys.length] = new Option('search_keys[{$search_keys[i].sek_id}]{if $search_keys[i].sek_html_input == 'multiple'}[]{/if}', {if $search_keys[i].sek_html_input == 'multiple'}'multiple'{elseif $search_keys[i].sek_html_input == 'combo'}'combo'{else}'whitespace'{/if});
    //-->
    </script>
  {/if}
  {if $search_keys[i].sek_html_input == 'text'}
  <input id="search_keys[{$search_keys[i].sek_id}]" type="text" name="search_keys[{$search_keys[i].sek_id}]" maxlength="255" size="30" value="{$last_key}" />
  {elseif $search_keys[i].sek_html_input == 'textarea'}
  <textarea id="search_keys[{$search_keys[i].sek_id}]" name="search_keys[{$search_keys[i].sek_id}]" rows="10" cols="60" value="{$last_key}"></textarea>
  {elseif $search_keys[i].sek_html_input == 'allcontvocab' or $search_keys[i].sek_html_input == 'contvocab'}
	{section name="z" loop=$search_keys[i].field_options}
	{assign var="loop_num" value=$search_keys[i].cv_ids[z]}
	<div id="tr_list_{$search_keys[i].sek_id}_{$loop_num}" valign="top" class="quick_search_item">
		<b>{$search_keys[i].sek_title}</b><br />{$search_keys[i].cv_titles[z]}
		<select id="search_keys_{$search_keys[i].sek_id}_{$loop_num}" multiple size="5" class="default" name="search_keys[{$search_keys[i].sek_id}]{if $search_keys[i].sek_html_input == 'multiple'}[]{/if}">
		</select>
		<input class="default" type="button" value="Add Subject" onclick="javascript:small_window('cv_selector.php?cvo_id={$search_keys[i].cv_ids[z]}&amp;form=custom_filter_form&amp;element=list_{$search_keys[i].sek_id}_{$loop_num}');" />
		<input class="default" type="button" value="Remove Subject" onclick="javascript:deleteSelectedItemsFromList(list_{$search_keys[i].sek_id}_{$loop_num});" />
	</div>
  {/section}	

  {else}
  <select id="search_keys[{$search_keys[i].sek_id}]" {if $search_keys[i].sek_html_input == 'multiple'}multiple size="8"{/if} name="search_keys[{$search_keys[i].sek_id}]{if $search_keys[i].sek_html_input == 'multiple'}[]{/if}">
    {html_options options=$search_keys[i].field_options selected=$last_key}
  </select>
  {/if}
  {assign var="search_key_id" value=$search_keys[i].sek_id}
  {if $search_keys[i].sek_html_input == 'multiple'}
    {assign var="search_key_sufix" value="[]"}
  {else}
    {assign var="search_key_sufix" value=""}
  {/if}
  {include file="error_icon.tpl.html" field="search_keys[$search_key_id]$search_key_sufix"}
  </div>
{/section}
     <input name="search_button" class="button quick_search_button" type="submit" value="Search" />
     <!-- <input class="button" type="button" value="Clear" onclick="javascript:clearFilters(this.form);"> -->
</div>

 	 {if $browser.ie5up or $browser.ns6up or $browser.gecko}
  <div class="default quick_search_hide" >hide/show:
  [ <a class="link" title="hide / show the quick search form" href="javascript:void(null);" onclick="javascript:toggleVisibility('custom_filter_form'{if $myFezView}, 1{/if});{if !$myFezView}toggleVisibility('basic_filter_form');{/if}">quick search</a> ]</div>
  {/if}


</div>
</form>
