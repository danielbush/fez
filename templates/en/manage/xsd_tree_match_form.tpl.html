{include file="header.tpl.html"}

{if $show_subelement_parents == true}

      <table width="100%" bgcolor="{$cell_color}" border="0" cellspacing="0" cellpadding="1" align="center">
        <tr>
          <td>
            <table bgcolor="#FFFFFF" width="100%" cellspacing="1" cellpadding="2" border="0">
              <form name="xsdsel_match_form" onSubmit="javascript:return validateForm(this);" method="post" action="{$smarty.server.PHP_SELF}">
		      <input type="hidden" name="form_name" value="xsdsel_match_form">
              {if $form_cat == 'edit'}
              <input type="hidden" name="form_cat" value="update">
              {else}
              <input type="hidden" name="form_cat" value="new">
              {/if}
              <input type="hidden" name="xdis_id" value="{$xdis_id}">
              <input type="hidden" name="xml_element" value="{$xml_element}">
              <tr>
                <td colspan="2" class="default">
                  <b>Choose the Looping Subelement Instance:</b>
                </td>
              </tr>
				<tr>
				  <td width="5" bgcolor="{$cell_color}" nowrap align="center"><input type="button" value="All" class="shortcut" onClick="javascript:toggleSelectAll(this.form, 'items[]');"></td>
				  <td width="50%" bgcolor="{$cell_color}" class="default">&nbsp;<b>Title</b></td>
				  <td width="15%" bgcolor="{$cell_color}" class="default">&nbsp;<b>Type</b></td>
				  <td width="15%" bgcolor="{$cell_color}" class="default">&nbsp;<b>Order</b></td>
				  <td width="15%" bgcolor="{$cell_color}" class="default">&nbsp;<b>Link to XSD Match Field for this Subelement Instance</b></td>
				</tr>
				{section name="i" loop=$xsdsel_loop_list}
				{cycle values=$cycle assign="row_color"}
				<tr>
				  <td width="4" nowrap bgcolor="{$row_color}" align="center">
					<input type="checkbox" name="items[]" value="{$xsdsel_loop_list[i].xsdsel_id}" {if $smarty.section.i.total == 0}disabled{/if}>
				  </td>
				  <td width="50%" bgcolor="{$row_color}" class="default">
					&nbsp;{$xsdsel_loop_list[i].xsdsel_title}
				  </td>
				  <td width="15%" bgcolor="{$row_color}" class="default">
					&nbsp;{$xsdsel_loop_list[i].xsdsel_type}
				  </td>
				  <td width="15%" bgcolor="{$row_color}" class="default">
					&nbsp;{$xsdsel_loop_list[i].xsdsel_order}
				  </td>
				  <td width="15%" bgcolor="{$row_color}" class="default">
                        &nbsp;<a class="link" href="xsd_tree_match_form.php?&xdis_id={$xdis_id}&xml_element={$xml_element}&xsdsel_id={$xsdsel_loop_list[i].xsdsel_id}" title="match this XSD Display against HTML elements">Link</a>
				  </td>
				</tr>
				{/section}
				<tr>
				  <td width="4" align="center" bgcolor="{$cell_color}">
					<input type="button" value="All" class="shortcut" onClick="javascript:toggleSelectAll(this.form, 'items[]');">
				  </td>
				  <td colspan="5" bgcolor="{$cell_color}">
					<input type="submit" value="Delete" class="button">
				  </td>
				</tr>
				</form>
			</table>
		  </td>
	    </tr>
	  </table>	
{else}
      <table width="100%" bgcolor="{$cell_color}" border="0" cellspacing="0" cellpadding="1" align="center">
        <tr>
          <td>
            <table bgcolor="#FFFFFF" width="100%" cellspacing="1" cellpadding="2" border="0">			  
              <script language="JavaScript">
              {$najax_register}
              {literal}
			  <!--
              var editing_option_id = -1;
              function validateForm(f)
              {
                  if (isWhitespace(f.title.value)) {
                      alert('Please enter the title of this xsd element to html element match.');
                      selectField(f, 'title');
                      return false;
                  }
                  if ((f.field_type[2].checked) || (f.field_type[3].checked)) {
                      // select all of the options in the select box
                      selectAllOptions(f, 'field_options[]');
                  }
                  return true;
              }
              function addFieldOption(f)
              {
                  var value = f.new_value.value;
                  if (isWhitespace(value)) {
                      alert('Please enter the new value for the combo box.');
                      f.new_value.value = '';
                      f.new_value.focus();
                      return false;
                  }
                  var field = getFormElement(f, 'field_options[]');
                  var current_length = field.options.length;
                  if (current_length == 1) {
                      if (field.options[0].value == -1) {
                          removeFieldOption(f, true);
                      }
                  }
                  // check for an existing option with the same value
                  for (var i = 0; i < field.options.length; i++) {
                      if (field.options[i].text == value) {
                          alert('The specified value already exists in the list of options.');
                          f.new_value.focus();
                          return false;
                      }
                  }
                  current_length = field.options.length;
                  field.options[current_length] = new Option(value, 'new:' + value);
                  f.new_value.value = '';
                  f.new_value.focus();
              }
              function parseParameters(value)
              {
                  value = value.substring(value.indexOf(':')+1);
                  var id = value.substring(0, value.indexOf(':'));
                  var text = value.substring(value.indexOf(':')+1);
                  return new Option(text, id);
              }
              function updateFieldOption(f)
              {
                  if (isWhitespace(f.new_value.value)) {
                      alert('Please enter the updated value.');
                      f.new_value.value = '';
                      f.new_value.focus();
                      return false;
                  }
                  var field = getFormElement(f, 'field_options[]');
                  for (var i = 0; i < field.options.length; i++) {
                      if (field.options[i].value == editing_option_id) {
                          var params = parseParameters(field.options[i].value);
                          field.options[i].value = 'existing:' + params.value + ':' + f.new_value.value;
                          field.options[i].text = f.new_value.value;
                          f.new_value.value = '';
                          f.update_button.disabled = true;
                      }
                  }
              }
              function editFieldOption(f)
              {
                  var options = getSelectedItems(getFormElement(f, 'field_options[]'));
                  if (options.length == 0) {
                      alert('Please select an option from the list.');
                      return false;
                  }
                  editing_option_id = options[0].value;
                  f.new_value.value = options[0].text;
                  f.new_value.focus();
                  f.update_button.disabled = false;
              }
              function removeFieldOption(f, delete_first)
              {
                  if (delete_first != null) {
                      var remove = new Array('-1');
                  } else {
                      var options = getSelectedItems(getFormElement(f, 'field_options[]'));
                      if (options.length == 0) {
                          alert('Please select an option from the list.');
                          return false;
                      }
                      var remove = new Array();
                      for (var i = 0; i < options.length; i++) {
                          remove[remove.length] = options[i].value;
                      }
                  }
                  for (var i = 0; i < remove.length; i++) {
                      removeOptionByValue(f, 'field_options[]', remove[i]);
                  }
                  var field = getFormElement(f, 'field_options[]');
                  if ((delete_first == null) && (field.options.length == 0)) {
                      field.options[0] = new Option('enter a new option above', '-1');
                  }
              }
              function toggleXSDMatchField(show_field)
              {
                  var f = getForm('xsd_tree_match_form');
                  f.new_value.disabled = show_field;
                  var field = getFormElement(f, 'field_options[]');
                  field.disabled = show_field;
                  f.add_button.disabled = show_field;
                  f.remove_button.disabled = show_field;
                  if (f.edit_button) {
                      f.edit_button.disabled = show_field;
                  }
                  return true;
              }
              function toggleStaticText(show_field)
              {
                  var f = getForm('xsd_tree_match_form');
				  var elementTitle = getPageElement('static_text_tr');
				  if (show_field == true) {
					elementTitle.style.display = '';
				  } else {
					elementTitle.style.display = 'none';
				  }
                  return true;
              }
			  function toggleControlledVocab(show_field)
              {
                  var f = getForm('xsd_tree_match_form');
				  var elementTitle = getPageElement('controlled_vocab_tr');
				  if (show_field == true) {
					elementTitle.style.display = '';
				  } else {
					elementTitle.style.display = 'none';
				  }
                  return true;
              }			  			  
              function toggleDynamicText(show_field)
              {
                  var f = getForm('xsd_tree_match_form');
				  var elementTitle = getPageElement('dynamic_text_tr');
				  if (show_field == true) {
					elementTitle.style.display = '';
				  } else {
					elementTitle.style.display = 'none';
				  }
                  return true;
              }
              function toggleFezVarText(show_field)
              {
                  var f = getForm('xsd_tree_match_form');
				  var elementTitle = getPageElement('fez_variable_tr');
				  if (show_field == true) {
					elementTitle.style.display = '';
				  } else {
					elementTitle.style.display = 'none';
				  }
                  return true;
              }
              function toggleSmartyVarText(show_field)
              {
                  var f = getForm('xsd_tree_match_form');
				  var elementTitle = getPageElement('smarty_variable_tr');
				  if (show_field == true) {
					elementTitle.style.display = '';
				  } else {
					elementTitle.style.display = 'none';
				  }
                  return true;
              }
              function toggleCheckboxSelectedOption(show_field)
              {
                  var f = getForm('xsd_tree_match_form');
				  var elementTitle = getPageElement('checkbox_selected_option_tr');
				  if (show_field == true) {
					elementTitle.style.display = '';
				  } else {
					elementTitle.style.display = 'none';
				  }
                  return true;
              }
              function toggleXSDRef(show_field)
              {
//                  var f = getForm('xsd_tree_match_form');
//				  if (
				  var elementCheck = getPageElement('no_xsd_refs');
				  if (!(elementCheck) && (show_field == true)) {
					  var f = getForm('xsd_tree_match_form');
					  for (var x=0; x < 17; x++) {
						if (x != 8) {
						  var field = getFormElement(f, 'field_type', x);
						  field.disabled = true;
						}
					  }
				  }
                  //f.field_type.disabled = true;


				  var elementTitle = getPageElement('xsd_display_ref_tr');

				  
				  if ((elementCheck) && (show_field == false)) {
					  if (show_field == true) {
						elementTitle.style.display = '';
					  } else {
						elementTitle.style.display = 'none';
					  }
					  return true;
				  } else {
					  if (show_field == true) {
						  elementTitle.style.display = '';
						  return true;
					  } else {
						  alert('There are still XSD Display references against this XSD Display Matching Field!\nYou must delete the references before you can change this XSDMF to another type.');
						  return false;
					  }
				  }
              }
              function toggleXSDLoopSubelement(show_field)
              {
//                  var f = getForm('xsd_tree_match_form');
//				  if (
				  var elementCheck = getPageElement('no_xsd_looping_subelements');
				  if (!(elementCheck) && (show_field == true)) {
					  var f = getForm('xsd_tree_match_form');
					  for (var x=0; x < 17; x++) {
						if (x != 9) {
						  var field = getFormElement(f, 'field_type', x);
						  field.disabled = true;
						}
					  }
				  }
                  //f.field_type.disabled = true;


				  var elementTitle = getPageElement('xsd_loop_subelement_tr');
//				  var elementTitle = getPageElement('xsd_display_ref_tr');
//				  elementTitle.style.display = '';

				  if ((elementCheck) && (show_field == false)) {
					  if (show_field == true) {
						elementTitle.style.display = '';

					  } else {
						elementTitle.style.display = 'none';
					  }
					  return true;
				  } else {

					  if (show_field == true) {
						  elementTitle.style.display = '';
						  return true;
					  } else {
						  alert('There are still XSD Looping Subelements against this XSD Display Matching Field!\nYou must delete the references before you can change this XSDMF to another type.');
						  return false;
					  }
				  }
              }


              function toggleValidationType(show_field)
              {
                  var f = getForm('xsd_tree_match_form');
				  var elementTitle = getPageElement('validation_type_tr');
				  if (show_field == true) {
					elementTitle.style.display = '';
				  } else {
					elementTitle.style.display = 'none';
				  }
                  return true;
              }
              function toggleDateType(show_field)
              {
                  var f = getForm('xsd_tree_match_form');
				  var elementTitle = getPageElement('date_type_tr');
				  if (show_field == true) {
					elementTitle.style.display = '';
				  } else {
					elementTitle.style.display = 'none';
				  }
                  return true;
              }			  
			  
              function toggleXSDMF_ID_Refs(show_field)
              {
                  var f = getForm('xsd_tree_match_form');
				  var elementTitle = getPageElement('tr_xsdmf_id_ref');
				  if (show_field == true) {
					elementTitle.style.display = '';
				  } else {
					elementTitle.style.display = 'none';
				  }
                  return true;
              }
              function toggleXSDSEL_loop(show_field)
              {
                  var f = getForm('xsd_loop_subelement_form');
				  var elementTitle = getPageElement('tr_xsdsel_attribute_loop_xsdmf_id');
				  if (show_field == true) {
					elementTitle.style.display = '';
				  } else {
					elementTitle.style.display = 'none';
				  }
                  return true;
              }


              function toggleFieldOptions(show_field)
              {
                  var f = getForm('xsd_tree_match_form');
				  var elementTitle = getPageElement('field_options_tr');
				  if (show_field == true) {
					elementTitle.style.display = '';
				  } else {
					elementTitle.style.display = 'none';
				  }
				  toggleDynamicSelectedOption(show_field);
                  return true;
              }
			  
              function toggleAuthorSelector(show_field)
              {
                  var f = getForm('xsd_tree_match_form');
				  var elementTitle = getPageElement('tr_parent_option_xdis_id');
				  if (show_field == true) {
					elementTitle.style.display = '';
				  } else {
					elementTitle.style.display = 'none';
				  }
//				  toggleDynamicSelectedOption(show_field);
                  return true;
              }			  
			  function toggleAuthorSuggestor(show_field)
              {
                  var f = getForm('xsd_tree_match_form');
				  var elementTitle = getPageElement('tr_asuggest_xdis_id');
				  if (show_field == true) {
					elementTitle.style.display = '';
				  } else {
					elementTitle.style.display = 'none';
				  }
//				  toggleDynamicSelectedOption(show_field);
                  return true;
              }			  
			  
              function toggleDynamicSelectedOption(show_field)
              {
                  var f = getForm('xsd_tree_match_form');
				  var elementTitle = getPageElement('dynamic_selected_option_tr');
				  if (show_field == true) {
					elementTitle.style.display = '';
				  } else {
					elementTitle.style.display = 'none';
				  }
				  var elementTitle = getPageElement('tr_parent_option_xdis_id');				  
				  if (show_field == true) {
					elementTitle.style.display = '';
				  } else {
					elementTitle.style.display = 'none';
				  }
                  return true;
              }

              function checkRequiredFields()
              {
                  var f = getForm('xsd_tree_match_form');
                  f.report_form_required.disabled = !(f.report_form.checked);
                  if (f.report_form_required.disabled) {
                      f.report_form_required.checked = false;
                  }
                  f.anon_form_required.disabled = !(f.anon_form.checked);
                  if (f.anon_form_required.disabled) {
                      f.anon_form_required.checked = false;
                  }
              }
			  
			    var dt_load_array = new Array();
				var dt_load_state = 0;
				var dt2_load_state = 0;
				var dt3_load_state = 0;
				var dt4_load_state = 0;
				var dt5_load_state = 0;
				var dt6_load_state = 0;
				function showLoading1()
				{
					document.body.style.cursor = 'wait';
					document.getElementById('loading1').style.display = 'block';
				}
				
				function hideLoading1()
				{
					document.body.style.cursor = '';
					document.getElementById('loading1').style.display = 'none';
				}
				function showLoading2()
				{
					document.body.style.cursor = 'wait';
					document.getElementById('loading2').style.display = 'block';
				}
				function showLoading3()
				{
					document.body.style.cursor = 'wait';
					document.getElementById('loading3').style.display = 'block';
				}
				function showLoading4()
				{
					document.body.style.cursor = 'wait';
					document.getElementById('loading4').style.display = 'block';
				}				
				function showLoading5()
				{
					document.body.style.cursor = 'wait';
					document.getElementById('loading5').style.display = 'block';
				}				
				function showLoading6()
				{
					document.body.style.cursor = 'wait';
					document.getElementById('loading6').style.display = 'block';
				}				

				function hideLoading2()
				{
					document.body.style.cursor = '';
					document.getElementById('loading2').style.display = 'none';
				}				

				function hideLoading3()
				{
					document.body.style.cursor = '';
					document.getElementById('loading3').style.display = 'none';
				}				
				function hideLoading4()
				{
					document.body.style.cursor = '';
					document.getElementById('loading4').style.display = 'none';
				}				
				function hideLoading5()
				{
					document.body.style.cursor = '';
					document.getElementById('loading5').style.display = 'none';
				}				
				function hideLoading6()
				{
					document.body.style.cursor = '';
					document.getElementById('loading6').style.display = 'none';
				}				


				var obj = new SelectXSDDisplay();				
				function selectXSDDisplay(f, field_name, child_field_name, select_value)
				{
					if (dt_load_array[child_field_name] > 0) {
					   return false;
					} 
					var field = getFormElement(f, field_name);
					var selections = getSelectedItems(field);
				
					if (selections.length > 0) {
						dt_load_array[child_field_name]++;
						//document.getElementById('tr_'+child_field_name).style.display = '';
						//showLoading1();
						obj.ongetMatchingFieldsError = function() {
							removeAllOptions(f, child_field_name);
							//hideLoading1();
							dt_load_array[child_field_name]--;
						}
						obj.setTimeout(10000);
						if (selections[0].value == '') { return false; }
						obj.getMatchingFields(selections[0].value, function(dt_list) {
								removeAllOptions(f, child_field_name);
								addOptions(f, child_field_name, dt_list);
								if (select_value != 0 && select_value != '') {
									selectOption(f, child_field_name, select_value);
								}
								//hideLoading1();
								dt_load_array[child_field_name]--;
								});
					}
				}			  
			  


				function selectXSDDisplayList(f, field_name)
				{
					if (dt2_load_state > 0) {
					   return false;
					} 
					var field = getFormElement(f, field_name);
					var selections = getSelectedItems(field);
					if (selections.length > 0) {
						dt2_load_state++;
//						document.getElementById('tr_parent_option_child_xsdmf_id').style.display = '';
						showLoading2();
						var obj = new SelectXSDDisplay();
						obj.ongetMatchingFieldsError = function() {
							removeAllOptions(f, 'xsdmf_parent_option_child_xsdmf_id');
							hideLoading2();
							dt2_load_state--;
						}
						obj.setTimeout(10000);
						obj.getMatchingFields(selections[0].value, function(dt_list) {
								removeAllOptions(f, 'xsdmf_parent_option_child_xsdmf_id');
								addOptions(f, 'xsdmf_parent_option_child_xsdmf_id', dt_list);
								hideLoading2();
								{/literal}{if $info.xsdmf_parent_option_child_xsdmf_id}selectOption(f, 'xsdmf_parent_option_child_xsdmf_id', {$info.xsdmf_parent_option_child_xsdmf_id});{/if}{literal}
								dt2_load_state--;
								});
					}
				}			  

				function selectXSDDisplayListSuggestor(f, field_name)
				{
					if (dt4_load_state > 0) {
					   return false;
					} 
					var field = getFormElement(f, field_name);
					var selections = getSelectedItems(field);
					if (selections.length > 0) {
						dt4_load_state++;
//						document.getElementById('tr_parent_option_child_xsdmf_id').style.display = '';
						showLoading4();
						var obj = new SelectXSDDisplay();
						obj.ongetMatchingFieldsError = function() {
							removeAllOptions(f, 'xsdmf_asuggest_xsdmf_id');
							hideLoading4();
							dt4_load_state--;
						}
						obj.setTimeout(10000);
						obj.getMatchingFields(selections[0].value, function(dt_list) {
								removeAllOptions(f, 'xsdmf_asuggest_xsdmf_id');
								addOptions(f, 'xsdmf_asuggest_xsdmf_id', dt_list);
								hideLoading4();
								{/literal}{if $info.xsdmf_asuggest_xsdmf_id}selectOption(f, 'xsdmf_asuggest_xsdmf_id', {$info.xsdmf_asuggest_xsdmf_id});{/if}{literal}
								dt4_load_state--;
								});
					}
				}			  

				function selectXSDDisplayOrgList(f, field_name)
				{
					if (dt3_load_state > 0) {
					   return false;
					} 
					var field = getFormElement(f, field_name);
					var selections = getSelectedItems(field);
					if (selections.length > 0) {
						dt3_load_state++;
//						document.getElementById('tr_parent_option_child_xsdmf_id').style.display = '';
						showLoading3();
//						var objOrg = new SelectXSDDisplay();
						obj.ongetMatchingFieldsError = function() {
							removeAllOptions(f, 'xsdmf_org_fill_xsdmf_id');
							hideLoading3();
							dt3_load_state--;
						}
						obj.setTimeout(10000);
						obj.getMatchingFields(selections[0].value, function(dt_list) {
								removeAllOptions(f, 'xsdmf_org_fill_xsdmf_id');
								addOptions(f, 'xsdmf_org_fill_xsdmf_id', dt_list);
								hideLoading3();
								{/literal}{if $info.xsdmf_org_fill_xsdmf_id}selectOption(f, 'xsdmf_org_fill_xsdmf_id', {$info.xsdmf_org_fill_xsdmf_id});{/if}{literal}
								dt3_load_state--;
								});
					}
				}			
				
              //-->
              </script>
              {/literal}
              <form name="xsd_tree_match_form" onSubmit="javascript:return validateForm(this);" method="post" action="{$smarty.server.PHP_SELF}">
		      <input type="hidden" name="form_name" value="xsdmf">
			  <input type="hidden" name="xsdmf_id" value="{$xsdmf_id}">
              {if $form_cat == 'edit'}
              <input type="hidden" name="form_cat" value="update">
              {else}
              <input type="hidden" name="form_cat" value="new">
              {/if}
              <input type="hidden" name="xdis_id" value="{$xdis_id}">
              <input type="hidden" name="xml_element" value="{$xml_element}">
              <input type="hidden" name="xsdsel_id" value="{$xsdsel_id}">
              <tr>
                <td colspan="2" class="default">
                  <b>XSD Tree Match to HTML Elements Form</b>
                </td>
              </tr>
              {if $result != ""  && $smarty.post.form_name == "xsdmf"}
              <tr>
                <td colspan="2" bgcolor="{$cell_color}" align="center" class="error">
                  {if $cat == "delete"}
                    {if $result == -1}
                      An error occurred while trying to remove the xsd element to html element match information.
                    {elseif $result == 1}
                      Thank you, the xsd element to html element match was removed successfully.
                    {/if}
                  {elseif $smarty.post.form_cat == "new"}
                    {if $result == -1}
                      An error occurred while trying to add the new xsd element to html element match.
                    {elseif $result == 1}
                      Thank you, the xsd element to html element match was added successfully.
                    {/if}
                  {elseif $smarty.post.form_cat == "update"}
                    {if $result == -1}
                      An error occurred while trying to update the xsd element to html element match information.
                    {elseif $result == 1}
                      Thank you, the xsd element to html element match was updated successfully.
                    {/if}
                  {/if}	
                </td>
              </tr>
              {/if}
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>XSD Sublooping Element Title:</b>
                </td>
                <td bgcolor="{$light_color}" class="default">
					{$xsdsel_title}
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>XML Element:</b>
                </td>
                <td bgcolor="{$light_color}" class="default">
                  {$xml_element_clean} {if $info.xsdmf_id} <b>(XSDMF_ID -> {$info.xsdmf_id})</b>{/if}
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Title:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="text" name="title" width="120" class="default" value="{if $info.xsdmf_title}{$info.xsdmf_title}{else}{if $xsdsel_title != "N/A"}{$xsdsel_title} - {/if}{$xml_element_clean}{/if}">
                  {include file="error_icon.tpl.html" field="title"}
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Label Description:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="text" name="description" width="30" class="default" value="{$info.xsdmf_description}">
                  <span class="small_default">(it will show up by the side of the label)</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Field Description:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <textarea name="long_description" rows="10" cols="60" class="default">{$info.xsdmf_long_description}</textarea>
                  <span class="small_default">(it will show up by the side of the field)</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Image Location:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="text" name="image_location" size="30" class="default" value="{$info.xsdmf_image_location}">
                  <span class="small_default">(It will be shown to the left of the title of the element if it exists in the images directory of Fez.)</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Enforced Namespace Prefix:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="text" name="enforced_prefix" size="30" class="default" value="{$info.xsdmf_enforced_prefix}">
                  <span class="small_default">(it will be used as the namespace for this field and override the main object namespace. You must include the ":".)</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Value Prefix:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="text" name="value_prefix" size="30" class="default" value="{$info.xsdmf_value_prefix}">
                  <span class="small_default">(it will be appended to the front of any form entered variable for this xsdmf match eg for Pids to have info:fedora/ at the front.)</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Display Order Priority:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="text" name="order" size="30" class="default" value="{if $info.xsdmf_order}{$info.xsdmf_order}{else}0{/if}"><br />
                  <span class="small_default">(The order the field will display on HTML forms, 0 is highest priority, 1, 2 next etc.)</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Enabled?:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="checkbox" name="enabled" class="default" {if (($info.xsdmf_enabled != 0) || ($info.xsdmf_enabled==''))}checked{/if}><br />
                  <span class="small_default">(If this enabled tickbox is not ticked this element will not be active)</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Indexed?:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="checkbox" name="indexed" class="default" {if ($info.xsdmf_indexed == 1)}checked{/if}><br />
                  <span class="small_default">(If this indexed tickbox is ticked data entered into this xml element will be used in searches in the Fez index)</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Search Key:</b>
                </td>
                <td bgcolor="{$light_color}">
					<select name="xsdmf_sek_id" class="default">
						<option value="">(no search key)</option>
						{html_options options=$search_key_list selected=$info.xsdmf_sek_id}
					</select>
                </td>
              </tr>			  
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Required?:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="checkbox" name="required" class="default" {if ($info.xsdmf_required == 1)}checked{/if}><br />
                  <span class="small_default">(If this enabled tickbox is not ticked you the input form will not require this field)</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Multiple?:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="checkbox" name="multiple" class="default" {if ($info.xsdmf_multiple == 1)}checked{/if}><br />
                  <span class="small_default">(If this enabled tickbox is ticked this element will be able to be entered multiple times in forms)</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Multiple Limit:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="text" name="multiple_limit" class="default" size="30" value="{$info.xsdmf_multiple_limit}"><br />
                  <span class="small_default">(The maximum amount of html input elements that will show for this element if it is a multiple)</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Show in View Details?:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="checkbox" name="show_in_view" class="default" {if ($info.xsdmf_show_in_view == 1 || $info.xsdmf_show_in_view == "")}checked{/if}><br />
                  <span class="small_default">(If this enabled tickbox is ticked this element will show its heading and value in the object view form)</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Value In Tag?:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="checkbox" name="valueintag" class="default" {if ($info.xsdmf_valueintag == 1 || $info.xsdmf_valueintag == "")}checked{/if}><br />
                  <span class="small_default">(If this enabled tickbox is ticked this element will have a start and end tag, rather than one which does both. Mainly used for element attributes.)</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Is a SEL Unique Key?:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="checkbox" name="is_key" class="default" {if ($info.xsdmf_is_key == 1)}checked{/if}><br />
                  <span class="small_default">(If this tickbox is ticked the element key match value will match against)</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Key Match Text:</b>
                </td>
                <td bgcolor="{$light_color}">
				  <input type="text" name="key_match" size="40" class="default" value="{$info.xsdmf_key_match}">
                  <span class="small_default">(If the above tickbox is ticked xml elements will be matched against this text value to get the corresponding xsdmf_id)</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Parent Key Match Text:</b>
                </td>
                <td bgcolor="{$light_color}">
				  <input type="text" name="parent_key_match" size="40" class="default" value="{$info.xsdmf_parent_key_match}">
                  <span class="small_default">(If the above tickbox is ticked xml elements will be matched against this text value to get the corresponding xsdmf_id from the parent element passed key match (if one exists))</span>
                </td>
              </tr>
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Index Data Type:</b>
                </td>
                <td bgcolor="{$light_color}">
					<select name="xsdmf_data_type" class="default">
						<option value="varchar" {if $info.xsdmf_data_type == 'varchar' || $info.xsdmf_data_type == ''}selected{/if}>Varchar (text up to 255 characters)</option>
						<option value="int" {if $info.xsdmf_data_type == 'int'}selected{/if}>Integer (whole number)</option>
						<option value="date" {if $info.xsdmf_data_type == 'date'}selected{/if}>Date (YYYY-MM-DD)</option>
					</select>
                </td>
              </tr>			  			  
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Attached XSDMF ID:</b>
                </td>
                <td bgcolor="{$light_color}">
				  <input type="text" name="attached_xsdmf_id" size="40" class="default" value="{$info.xsdmf_attached_xsdmf_id}">
                  <span class="small_default">(If an existing XSDMF ID is entered here then that matching field will be shown to the right of this matching field in any forms. Mainly useful for Author ID selectors)</span> </td>
              </tr>			
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Use in HTML Meta Header?:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="checkbox" name="xsdmf_meta_header" class="default" {if ($info.xsdmf_meta_header == 1)}checked{/if}><br />
                  <span class="small_default">(If this tickbox is ticked and a header name given below, the value for this element will be shown in the html head tag as a head meta tag)</span>
              </tr>			
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>HTML Meta Header Name:</b>
                </td>
                <td bgcolor="{$light_color}">
				  <input type="text" name="xsdmf_meta_header_name" size="40" class="default" value="{$info.xsdmf_meta_header_name}">
                  <span class="small_default">(If the above tickbox is ticked this string will be used as the header name - eg DC.creator)</span>
              </tr>			
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Use in Citation Browse Listings Level?:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="checkbox" name="xsdmf_citation_browse" class="default" {if ($info.xsdmf_citation_browse == 1)}checked{/if}><br />
                  <span class="small_default">(If this tickbox is ticked the value for this element will be shown in the object browsing citation level)</span>
              </tr>			
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Use in Citation View Level?:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="checkbox" name="xsdmf_citation" class="default" {if ($info.xsdmf_citation == 1)}checked{/if}><br />
                  <span class="small_default">(If this tickbox is ticked the value for this element will be shown in the object viewing citation level)</span>
              </tr>			
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Citation Bold?:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="checkbox" name="xsdmf_citation_bold" class="default" {if ($info.xsdmf_citation_bold == 1)}checked{/if}><br />
                  <span class="small_default">(If this tickbox is ticked the value for this element will be shown in the citation in bold)</span>
              </tr>			
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Citation Italics?:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="checkbox" name="xsdmf_citation_italics" class="default" {if ($info.xsdmf_citation_italics == 1)}checked{/if}><br />
                  <span class="small_default">(If this tickbox is ticked the value for this element will be shown in the citation in italics)</span>
              </tr>	
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Citation Brackets?:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="checkbox" name="xsdmf_citation_brackets" class="default" {if ($info.xsdmf_citation_brackets == 1)}checked{/if}><br />
                  <span class="small_default">(If this tickbox is ticked the value for this element will be shown in the citation in brackets)</span>
              </tr>				  
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Citation Order:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="text" name="xsdmf_citation_order" size="30" class="default" value="{if $info.xsdmf_citation_order}{$info.xsdmf_citation_order}{else}0{/if}"><br />
                  <span class="small_default">(The order the field will display in the citation)</span>
              </tr>				  
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Citation Prefix:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="text" name="xsdmf_citation_prefix" size="30" class="default" value="{$info.xsdmf_citation_prefix}"><br />
                  <span class="small_default">(The static text prefix of this field in the citation eg 'pages ' for a page number field)</span>
              </tr>				  
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Citation Suffix:</b>
                </td>
                <td bgcolor="{$light_color}">
                  <input type="text" name="xsdmf_citation_suffix" size="30" class="default" value="{$info.xsdmf_citation_suffix}"><br />
                  <span class="small_default">(The static text suffix of this field in the citation eg comma, or full stop.)</span>
              </tr>				 
              <tr>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Field Type:</b>
                </td>
                <td bgcolor="{$light_color}" class="default">
				  {literal}
                  <input type="radio" name="field_type" value="text" {/literal}{if ($info.xsdmf_html_input == 'xsd_ref' && $xsd_display_count > 0) || ($info.xsdmf_html_input == 'xsd_loop_subelement' && $xsd_subelement_count > 0)}disabled{/if} {if $info.xsdmf_html_input == 'text'}checked{/if}{literal} onClick="javascript: if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(true);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">
                  <a id="link" class="link" href="javascript:void(null);" onClick="javascript:if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { checkRadio('xsd_tree_match_form', 'field_type', 0);  toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(true);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">Text Input</a>&nbsp;
                  <input type="radio" name="field_type" value="textarea" {/literal}{if ($info.xsdmf_html_input == 'xsd_ref' && $xsd_display_count > 0) || ($info.xsdmf_html_input == 'xsd_loop_subelement' && $xsd_subelement_count > 0)}disabled{/if} {if $info.xsdmf_html_input == 'textarea'}checked{/if}{literal} onClick="javascript: if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(true);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">
                  <a id="link" class="link" href="javascript:void(null);" onClick="javascript:if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { checkRadio('xsd_tree_match_form', 'field_type', 1);  toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(true);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">Textarea</a>&nbsp;
                  <input type="radio" name="field_type" value="combo" {/literal}{if ($info.xsdmf_html_input == 'xsd_ref' && $xsd_display_count > 0) || ($info.xsdmf_html_input == 'xsd_loop_subelement' && $xsd_subelement_count > 0)}disabled{/if} {if $info.xsdmf_html_input == 'combo'}checked{/if}{literal} onClick="javascript: if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(true);toggleSmartyVarText(true);toggleXSDMatchField(false);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(true);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">
                  <a id="link" class="link" href="javascript:void(null);" onClick="javascript:if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { checkRadio('xsd_tree_match_form', 'field_type', 2);  toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(true);toggleSmartyVarText(true);toggleXSDMatchField(false);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(true);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">Combo Box</a>&nbsp;
                  <input type="radio" name="field_type" value="multiple" {/literal}{if ($info.xsdmf_html_input == 'xsd_ref' && $xsd_display_count > 0) || ($info.xsdmf_html_input == 'xsd_loop_subelement' && $xsd_subelement_count > 0)}disabled{/if} {if $info.xsdmf_html_input == 'multiple'}checked{/if}{literal} onClick="javascript: if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(true);toggleSmartyVarText(true);toggleXSDMatchField(false);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(true);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">
	              <a id="link" class="link" href="javascript:void(null);" onClick="javascript:if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { checkRadio('xsd_tree_match_form', 'field_type', 3);  toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(true);toggleSmartyVarText(true);toggleXSDMatchField(false);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(true);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">Multiple Combo Box</a>
<br />            <input type="radio" name="field_type" value="checkbox" {/literal}{if ($info.xsdmf_html_input == 'xsd_ref' && $xsd_display_count > 0) || ($info.xsdmf_html_input == 'xsd_loop_subelement' && $xsd_subelement_count > 0)}disabled{/if} {if $info.xsdmf_html_input == 'checkbox'}checked{/if}{literal} onClick="javascript: if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(true);toggleAuthorSuggestor(false);toggleDateType(false);}">
                  <a id="link" class="link" href="javascript:void(null);" onClick="javascript:if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { checkRadio('xsd_tree_match_form', 'field_type', 4);  toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(true);toggleAuthorSuggestor(false);toggleDateType(false);}">Checkbox</a>&nbsp;
	            <input type="radio" name="field_type" value="date" {/literal}{if ($info.xsdmf_html_input == 'xsd_ref' && $xsd_display_count > 0) || ($info.xsdmf_html_input == 'xsd_loop_subelement' && $xsd_subelement_count > 0)}disabled{/if} {if $info.xsdmf_html_input == 'date'}checked{/if}{literal} onClick="javascript: if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(true);}">
                  <a id="link" class="link" href="javascript:void(null);" onClick="javascript:if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { checkRadio('xsd_tree_match_form', 'field_type', 5);  toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(true);}">Date</a>&nbsp;
		         <input type="radio" name="field_type" value="static" {/literal}{if ($info.xsdmf_html_input == 'xsd_ref' && $xsd_display_count > 0) || ($info.xsdmf_html_input == 'xsd_loop_subelement' && $xsd_subelement_count > 0)}disabled{/if} {if $info.xsdmf_html_input == 'static'}checked{/if}{literal} onClick="javascript: if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) {  toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(true);toggleSmartyVarText(true);toggleXSDMatchField(false);toggleStaticText(true);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);}toggleAuthorSuggestor(false);toggleDateType(false);">
                  <a id="link" class="link" href="javascript:void(null);" onClick="javascript:if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) {checkRadio('xsd_tree_match_form', 'field_type', 6);  toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(true);toggleSmartyVarText(true);toggleXSDMatchField(false);toggleStaticText(true);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">Hidden Static Text</a>
       			  <input type="radio" name="field_type" value="dynamic" {/literal}{if ($info.xsdmf_html_input == 'xsd_ref' && $xsd_display_count > 0) || ($info.xsdmf_html_input == 'xsd_loop_subelement' && $xsd_subelement_count > 0)}disabled{/if} {if $info.xsdmf_html_input == 'dynamic'}checked{/if}{literal} onClick="javascript: if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(false);toggleStaticText(false);toggleDynamicText(true);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">
                  <a id="link" class="link" href="javascript:void(null);" onClick="javascript:if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) {checkRadio('xsd_tree_match_form', 'field_type', 7);  toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(false);toggleStaticText(false);toggleDynamicText(true);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">Hidden Dynamic Text</a>
<br />            <input type="radio" name="field_type" value="xsd_ref" {/literal}{if $info.xsdmf_html_input == 'xsd_ref'}checked{/if} {if ($info.xsdmf_html_input == 'xsd_loop_subelement' && $xsd_subelement_count > 0)}disabled{/if}{literal} onClick="javascript: if (toggleXSDLoopSubelement(false) && toggleXSDRef(true)) { toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(false);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">
                  <a id="link" class="link" href="javascript:void(null);" onClick="if (toggleXSDLoopSubelement(false) && toggleXSDRef(true)) { javascript:checkRadio('xsd_tree_match_form', 'field_type', 8); toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(false);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">XSD Reference(s)</a>
		          <input type="radio" name="field_type" value="xsd_loop_subelement" {/literal}{if $info.xsdmf_html_input == 'xsd_loop_subelement'}checked{/if} {if ($info.xsdmf_html_input == 'xsd_ref' && $xsd_display_count > 0)}disabled{/if}{literal} onClick="javascript: if (toggleXSDRef(false) && toggleXSDLoopSubelement(true)) { toggleAuthorSelector(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(false);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">
                  <a id="link" class="link" href="javascript:void(null);" onClick="if (toggleXSDRef(false) && toggleXSDLoopSubelement(true)) { javascript:checkRadio('xsd_tree_match_form', 'field_type', 9); toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(false);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">XSD Loop Subelement(s)</a>
                  <input type="radio" name="field_type" value="xsdmf_id_ref" {/literal}{if ($info.xsdmf_html_input == 'xsd_ref' && $xsd_display_count > 0) || ($info.xsdmf_html_input == 'xsd_loop_subelement' && $xsd_subelement_count > 0)}disabled{/if} {if $info.xsdmf_html_input == 'xsdmf_id_ref'}checked{/if}{literal} onClick="javascript: if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(true);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">
                  <a id="link" class="link" href="javascript:void(null);" onClick="javascript:if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { checkRadio('xsd_tree_match_form', 'field_type', 10);  toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(true);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">XSDMF ID Reference</a>&nbsp;
<br />            <input type="radio" name="field_type" value="file_input" {/literal}{if ($info.xsdmf_html_input == 'xsd_ref' && $xsd_display_count > 0) || ($info.xsdmf_html_input == 'xsd_loop_subelement' && $xsd_subelement_count > 0)}disabled{/if} {if $info.xsdmf_html_input == 'file_input'}checked{/if}{literal} onClick="javascript: if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">
                  <a id="link" class="link" href="javascript:void(null);" onClick="javascript:if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { checkRadio('xsd_tree_match_form', 'field_type', 11);  toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">File Upload Input</a>&nbsp;
	              <input type="radio" name="field_type" value="contvocab_selector" {/literal}{if ($info.xsdmf_html_input == 'xsd_ref' && $xsd_display_count > 0) || ($info.xsdmf_html_input == 'xsd_loop_subelement' && $xsd_subelement_count > 0)}disabled{/if} {if $info.xsdmf_html_input == 'contvocab_selector'}checked{/if}{literal} onClick="javascript: if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { toggleAuthorSelector(false);toggleControlledVocab(true);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">
                  <a id="link" class="link" href="javascript:void(null);" onClick="javascript:if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { checkRadio('xsd_tree_match_form', 'field_type', 12);  toggleAuthorSelector(false);toggleControlledVocab(true);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">Controlled Vocabulary Selector</a>&nbsp;
	              <input type="radio" name="field_type" value="author_selector" {/literal}{if ($info.xsdmf_html_input == 'xsd_ref' && $xsd_display_count > 0) || ($info.xsdmf_html_input == 'xsd_loop_subelement' && $xsd_subelement_count > 0)}disabled{/if} {if $info.xsdmf_html_input == 'author_selector'}checked{/if}{literal} onClick="javascript: if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSelector(true);toggleAuthorSuggestor(false);toggleDateType(false);}">
                  <a id="link" class="link" href="javascript:void(null);" onClick="javascript:if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { checkRadio('xsd_tree_match_form', 'field_type', 13);  toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSelector(true);toggleAuthorSuggestor(false);toggleDateType(false);}">Author Selector</a>&nbsp;
	              <input type="radio" name="field_type" value="author_suggestor" {/literal}{if ($info.xsdmf_html_input == 'xsd_ref' && $xsd_display_count > 0) || ($info.xsdmf_html_input == 'xsd_loop_subelement' && $xsd_subelement_count > 0)}disabled{/if} {if $info.xsdmf_html_input == 'author_suggestor'}checked{/if}{literal} onClick="javascript: if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSelector(false);toggleAuthorSuggestor(true);toggleDateType(false);}">
                  <a id="link" class="link" href="javascript:void(null);" onClick="javascript:if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { checkRadio('xsd_tree_match_form', 'field_type', 14);  toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSelector(false);toggleAuthorSuggestor(true);toggleDateType(false);}">Author Suggestor</a>&nbsp;
<br />            <input type="radio" name="field_type" value="org_selector" {/literal}{if ($info.xsdmf_html_input == 'xsd_ref' && $xsd_display_count > 0) || ($info.xsdmf_html_input == 'xsd_loop_subelement' && $xsd_subelement_count > 0)}disabled{/if} {if $info.xsdmf_html_input == 'org_selector'}checked{/if}{literal} onClick="javascript: if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">
                  <a id="link" class="link" href="javascript:void(null);" onClick="javascript:if (toggleXSDRef(false) && toggleXSDLoopSubelement(false)) { checkRadio('xsd_tree_match_form', 'field_type', 15);  toggleAuthorSelector(false);toggleControlledVocab(false);toggleFezVarText(false);toggleSmartyVarText(false);toggleXSDMatchField(true);toggleStaticText(false);toggleDynamicText(false);toggleFieldOptions(false);toggleValidationType(false);toggleXSDMF_ID_Refs(false);toggleCheckboxSelectedOption(false);toggleAuthorSuggestor(false);toggleDateType(false);}">Organisational Structure Selector</a>&nbsp;

                {/literal}
                </td>
              </tr>

              {if $info.xsdmf_html_input == 'combo' 
                    || $info.xsdmf_html_input == 'multiple' 
                        || $info.xsdmf_html_input == 'tree'}
                 {assign var="selectingfield" value=true}
              {else}
                 {assign var="selectingfield" value=false}
              {/if}
              {if !$selectingfield}
                 {assign var="selectingfield_only" value='style="display:none"'}
              {else}
                 {assign var="selectingfield_only" value=''}
              {/if}
                {if $selectingfield && $info.xsdmf_html_input != 'tree'}
                  {assign var="show_field_options" value=true}
                {else}
                  {assign var="show_field_options" value=false}
                {/if}
              <tr id="field_options_tr" {if !$show_field_options}style="display:none"{/if} >
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Field Options:</b><i>(If a dynamic variable is set it will be used instead of the entered values)</i>
                </td>
                <td bgcolor="{$light_color}">
                  <table bgcolor="{$light_color}" cellspacing="0" cellpadding="0" border="0">
                    <tr>
                      <td rowspan="2"><img src="{$rel_url}images/blank.gif" width="30" height="1"></td>
                      <td>
                        <span class="default"><b>Set available options:</b></span><br />
                        <input class="default" type="text" name="new_value" size="26"><input class="shortcut" name="add_button" type="button" value="Add" onClick="javascript:addFieldOption(this.form);">{if $smarty.get.form_cat == 'edit'}<input class="shortcut" name="update_button" type="button" value="Update Value" disabled onClick="javascript:updateFieldOption(this.form);">{/if}<br />
                      </td>
                      <td rowspan="3"><img src="{$rel_url}images/blank.gif" width="30" height="1"></td>
                    </tr>
                    <tr>
                      <td>
                        <table border="0" cellspacing="0" cellpadding="0">
                          <tr>
                            <td>
                              <select name="field_options[]" multiple size="3" class="default">
                              {if $info.field_options == ""}
                                <option value="-1">enter a new option above</option>
                              {else}
                                {html_options options=$info.field_options}
                              {/if}
                              </select>
                            </td>
                            <td valign="top">
                              {if $form_cat == 'edit'}
                              <input class="shortcut" type="button" name="edit_button" value="Edit Option" onClick="javascript:editFieldOption(this.form);"><br />
                              {/if}
                              <input class="shortcut" type="button" name="remove_button" value="Remove" onClick="javascript:removeFieldOption(this.form);">
                            </td>
                          </tr>
                        </table>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
              <tr id="controlled_vocab_tr"  {if $info.xsdmf_html_input != 'contvocab'}style="display:none"{/if}>
                 <td width="120" bgcolor="{$cell_color}" class="default"><b>Controlled Vocabulary:</b></td>
 				<td bgcolor="{$light_color}">
					<select class="default" name="xsdmf_cvo_id">
					  {html_options options=$controlled_vocab_list selected=$info.xsdmf_cvo_id}
					</select><br />
					<span class="default">Minimum Selectable Branch Level:</span>
					<select class="default" name="xsdmf_cvo_min_level">
					  	<option value=0 {if ($info.xsdmf_cvo_min_level == 0) or ($info.xsdmf_cvo_min_level == '')}selected{/if}>Top Parent Branch</option>
					  	<option value=1 {if ($info.xsdmf_cvo_min_level == 1)}selected{/if}>First Child Branch</option>
					</select><br />
					<span class="default">Save CVO value or ID?:</span>					
					<select class="default" name="xsdmf_cvo_save_type">
						<option value="0" {if ($info.xsdmf_cvo_save_type == 0) or ($info.xsdmf_cvo_save_type == '')}selected{/if}>ID</option>
						<option value="1" {if ($info.xsdmf_cvo_save_type == 1)}selected{/if}>Value</option>
					</select>					
			  	</td>
		     </tr>			  
              <tr id="smarty_variable_tr"  {if $info.xsdmf_html_input != 'static' && !$selectingfield}style="display:none"{/if}>
                 <td width="120" bgcolor="{$cell_color}" class="default"><b>Dynamic Variable:</b><i>(If a dynamic variable is set it will be used instead of the entered values, or if this is a combo or multiple html input then the dynamic variable will be used as the field options)</i></td>
 				<td bgcolor="{$light_color}">
					<input class="default" type="text" name="smarty_variable" size="26" value="{$info.xsdmf_smarty_variable}">
			  	</td>
		     </tr>
		      <tr id="dynamic_selected_option_tr" {$selectingfield_only}>
                 <td width="120" bgcolor="{$cell_color}" class="default" valign="top"><b>Dynamic Selected Option:</b><i>(If a dynamic variable is set it will be used to preselect the select options for combo boxes and multiple select boxes)</i></td>
 				<td bgcolor="{$light_color}">
					<input class="default" type="text" name="dynamic_selected_option" size="26" value="{$info.xsdmf_dynamic_selected_option}">
			  	</td>
		     </tr>
					<tr id="tr_parent_option_xdis_id" {$selectingfield_only}>
					  <td bgcolor="{$cell_color}" class="default" valign="top">
						<b>Parent XSDMF Element list:</b><i>(If this option is checked then the list of options will come from the first parent object of this type and this xsd matching field)<br /><br />(If this is an <b>Author Selector</b> then it will use this element to limit the author check to an organisation level eg School. For an Author Selector the element should point to an organisation ID that has relationships with authors, again like School.)</i>
					  </td>
					  <td bgcolor="{$light_color}">
		                <span class="default">Use this list?:</span> <input type="checkbox" name="xsdmf_use_parent_option_list" class="default" {if ($info.xsdmf_use_parent_option_list == 1)}checked{/if}><br />
						<select class="default" name="xsdmf_parent_option_xdis_id" onChange="javascript: selectXSDDisplayList(this.form, 'xsdmf_parent_option_xdis_id')">
						 {html_options options=$xsd_displays selected=$info.xsdmf_parent_option_xdis_id}
						</select><br />
						<div id="loading2" style="display:none;">Loading...</div>
						<select class="default" name="xsdmf_parent_option_child_xsdmf_id" >
						</select>
					  </td>
					</tr>
      {literal}
      <script language="JavaScript">
      <!--
	  selectXSDDisplayList(getForm('xsd_tree_match_form'), 'xsdmf_parent_option_xdis_id'); 
	  //-->
      </script>
      {/literal}					
					<tr id="tr_asuggest_xdis_id" {$selectingfield_only}>
					  <td bgcolor="{$cell_color}" class="default" valign="top">
						<b>Suggest Target Element:</b><i>(The selected target element will be filled with the lookup text, eg Full name)</i>
					  </td>
					  <td bgcolor="{$light_color}">
						<select class="default" name="xsdmf_asuggest_xdis_id" onChange="javascript: selectXSDDisplayListSuggestor(this.form, 'xsdmf_asuggest_xdis_id')">
						 {html_options options=$xsd_displays selected=$info.xsdmf_asuggest_xdis_id}
						</select><br />
						<div id="loading4" style="display:none;">Loading...</div>
						<select class="default" name="xsdmf_asuggest_xsdmf_id" >
						</select>
					  </td>
					</tr>

      {literal}
      <script language="JavaScript">
      <!--
	  selectXSDDisplayListSuggestor(getForm('xsd_tree_match_form'), 'xsdmf_asuggest_xdis_id'); 
	  //-->
      </script>
      {/literal}

				<tr id="tr_parent_option_xdis_id" {if $info.xsdmf_html_input != 'org_selector'}style="display:none"{/if}>
				  <td bgcolor="{$cell_color}" class="default" valign="top">
					<b>Organisational Structure Level:</b><br /><i>(The level where the list of values will be selected from)</i>
				  </td>
				  <td bgcolor="{$light_color}">
					<select class="default" name="xsdmf_org_level"> 
					 {html_options options=$org_levels selected=$info.xsdmf_org_level}
					</select><br />
					<span class="default">Use Org Level to fill a combo box?:</span> <input type="checkbox" name="xsdmf_use_org_to_fill" class="default" {if ($info.xsdmf_use_org_to_fill == 1)}checked{/if}><br />
					<select class="default" name="xsdmf_org_fill_xdis_id" onChange="javascript: selectXSDDisplayOrgList(this.form, 'xsdmf_org_fill_xdis_id')">
					 {html_options options=$xsd_displays selected=$info.xsdmf_org_fill_xdis_id}
					</select><br />
					<div id="loading3" style="display:none;">Loading...</div>
					<select class="default" name="xsdmf_org_fill_xsdmf_id" >
					</select>
				  </td>
				</tr>
        {literal}
      <script language="JavaScript">
      <!--
	  selectXSDDisplayOrgList(getForm('xsd_tree_match_form'), 'xsdmf_org_fill_xdis_id'); 	
	  //-->
      </script>
      {/literal}

		      <tr id="checkbox_selected_option_tr" {if $info.xsdmf_html_input != 'checkbox'}style="display:none"{/if}>
                 <td width="120" bgcolor="{$cell_color}" class="default"><b>Checkbox Default Value:</b><i>(The default value of a checkbox input - checked or not checked)</i></td>
 				<td bgcolor="{$light_color}">
					<select class="default" name="checkbox_selected_option">
					  {html_options options=$checkbox_options_list selected=$info.xsdmf_cso_value}
					</select>
			  	</td>
		     </tr>

			 <tr id="fez_variable_tr" {if $info.xsdmf_html_input != 'static' && !$selectingfield}style="display:none"{/if}>
                 <td width="120" bgcolor="{$cell_color}" class="default"><b>Fez Variable:</b><i>(If a Fez variable is set it will be used instead of any other options including smarty template variables)</i></td>
				<td class="default" bgcolor="{$light_color}"><br /><b>OR use one of these Fez variables: </b> <br />
					<INPUT TYPE=RADIO NAME="fez_variable" VALUE="none" {if ($info.xsdmf_fez_variable == "" || $info.xsdmf_fez_variable == "none")}checked{/if}/>None<BR>
					<INPUT TYPE=RADIO NAME="fez_variable" VALUE="pid" {if $info.xsdmf_fez_variable == "pid"}checked{/if}/>Pid (for new records it will get the new Pid)<BR>
					<INPUT TYPE=RADIO NAME="fez_variable" VALUE="xdis_id" {if $info.xsdmf_fez_variable == "xdis_id"}checked{/if}/>XSD Display ID<BR>
					<INPUT TYPE=RADIO NAME="fez_variable" VALUE="sta_id" {if $info.xsdmf_fez_variable == "sta_id"}checked{/if}/>Fez Object Status ID<BR>
					<INPUT TYPE=RADIO NAME="fez_variable" VALUE="file_downloads" {if $info.xsdmf_fez_variable == "file_downloads"}checked{/if}/>File Downloads Statistics<BR>
					<INPUT TYPE=RADIO NAME="fez_variable" VALUE="created_date" {if $info.xsdmf_fez_variable == "created_date"}checked{/if}/>Fez Created Date<BR>
					<INPUT TYPE=RADIO NAME="fez_variable" VALUE="updated_date" {if $info.xsdmf_fez_variable == "updated_date"}checked{/if}/>Fez Updated Date<BR>
				</td>
 			  </tr> 

              <tr id="tr_xsdmf_id_ref" {if $info.xsdmf_html_input != 'xsdmf_id_ref'}style="display:none"{/if}>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>XSDMF ID Reference:</b>
                </td>
                <td bgcolor="{$light_color}">
									{if $info.xsdmf_xdis_id_ref == '' ||  $info.xsdmf_xdis_id_ref == 0}
					                  {assign var="idref_xdis_id" value=$xdis_id}
									{else}
									  {assign var="idref_xdis_id" value=$info.xsdmf_xdis_id_ref}
									{/if}
									<select class="default" name="xsdmf_xdis_id_ref" onChange="javascript: selectXSDDisplay(this.form, 'xsdmf_xdis_id_ref', 'xsdmf_id_ref', {if $info.xsdmf_id_ref}{$info.xsdmf_id_ref}{else}0{/if}); ">
									 {html_options options=$xsd_displays selected=$idref_xdis_id}
									</select> <br />
									<div id="loading6" style="display:none;">Loading...</div>
									<select class="default" name="xsdmf_id_ref">
									</select>
					<br />
					<span class="default">Save reference value or ID?:</span>					
					<select class="default" name="xsdmf_id_ref_save_type">
						<option value="0" {if ($info.xsdmf_id_ref_save_type == 0) or ($info.xsdmf_id_ref_save_type == '')}selected{/if}>ID</option>
						<option value="1" {if ($info.xsdmf_id_ref_save_type == 1)}selected{/if}>Value</option>  
					</select>
					<span class="default">(only used for controlled vocabularies)</span>
                </td>
              </tr>
              <tr id="static_text_tr" {if $info.xsdmf_html_input != 'static'}style="display:none"{/if}>
				<td width="120" bgcolor="{$cell_color}" class="default">
				  <b>Static Text:</b>
				</td>
                <td bgcolor="{$light_color}">
                  <table bgcolor="{$dark_color}" cellspacing="0" cellpadding="0" border="0">
                    <tr>			
						<td bgcolor="{$light_color}">
						  <textarea name="static_text" rows="20" cols="60" class="default" value="{$info.xsdmf_static_text}">{$info.xsdmf_static_text}</textarea>
						  <br /><span class="small_default">(it will be added when XML for an instance of this XSD is created)</span>
						</td>
					  </tr>
					</table>
				 </td>
			  </tr>

              <tr id="dynamic_text_tr" {if $info.xsdmf_html_input != 'dynamic'}style="display:none"{/if}>
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Dynamic Text: <br /><i>(The xml creation process will look for a post variable with the name you put in the textarea and use it as the dynamic variable so make sure it exists, usually as a hidden form html input)</i></b>
                </td>
                <td bgcolor="{$light_color}">
                  <textarea name="dynamic_text" rows="20" cols="60" class="default" value="{$info.xsdmf_dynamic_text}">{$info.xsdmf_dynamic_text}</textarea>
                  <br /><span class="small_default">(it will be added when XML for an instance of this XSD is created)</span>
                </td>
              </tr>
              <tr id="validation_type_tr" style="display:none">
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Validation Type: *note the enforcement of this isn't implemented yet</b>
                </td>
                <td bgcolor="{$light_color}">
				  <select name="validation_types" class="default">
				  	<option value="none" {if ($info.xsdmf_validation_type == 'none') or ($info.xsdmf_validation_type == '')}selected{/if}>None</option>
				  	<option value="numeric" {if ($info.xsdmf_validation_type == 'numeric')}selected{/if}>Numeric</option>
				  	<option value="date" {if ($info.xsdmf_validation_type == 'date')}selected{/if}>Date</option>
				  	<option value="email" {if ($info.xsdmf_validation_type == 'email')}selected{/if}>Email Address</option>
				  </select>
                  <br /><span class="small_default">(The datatype the javascript will validate input in this field against)</span>
                </td>
              </tr>
              <tr id="date_type_tr" style="display:none">
                <td width="120" bgcolor="{$cell_color}" class="default">
                  <b>Date Type: </b>
                </td>
                <td bgcolor="{$light_color}">
				  <select name="xsdmf_date_type" class="default">
				  	<option value="0" {if ($info.xsdmf_date_type == 0) or ($info.xsdmf_date_type == '')}selected{/if}>Full Date (eg 26/01/1981)</option>
				  	<option value="1" {if ($info.xsdmf_date_type == 1)}selected{/if}>Year Only (eg 2006)</option>
				  </select>
                  <br /><span class="small_default">(Year only will save as 1/1/YEAR eg 1/1/2006 for sorting purposes, but display as 2006)</span>
                </td>
              </tr>			  
			  
              <tr>
                <td colspan="2" bgcolor="{$cell_color}" align="center">
                  {if $form_cat == 'edit'}
                  <input class="button" type="submit" value="Update XSD Element to HTML Element Match">
                  {else}
                  <input class="button" type="submit" value="Create XSD Element to HTML Element Match">
                  {/if}
                  <input class="button" type="reset" value="Reset">
                  {if $form_cat == 'edit'}
                  <input class="button" type="submit" name="submit" value="Delete" onclick="return confirm('Are you sure you want to delete the selected XSD Element to HTML input form matching?')">
                  {/if}
                </td>
              </tr>
              </form>
            </table>
          </td>
        </tr>

		<tr id="xsd_display_ref_tr" {if $info.xsdmf_html_input != 'xsd_ref'}style="display:none"{/if}>
			<td>
		    {if $form_cat == 'edit'}		
			  <table width="100%" bgcolor="{$cell_color}" border="0" cellspacing="0" cellpadding="1" align="center">
				<tr>
				  <td>
					<table bgcolor="#FFFFFF" width="100%" cellspacing="1" cellpadding="2" border="0">
					  <form name="xsd_display_ref_form" method="post" action="{$smarty.server.PHP_SELF}">
					  <a id="xsdrel_main"/>
		              <input type="hidden" name="xdis_id" value="{$xdis_id}">
 		              <input type="hidden" name="xml_element" value="{$xml_element}">
		              <input type="hidden" name="xsdsel_id" value="{$xsdsel_id}">
 					  <input type="hidden" name="form_name" value="xsdrel_main">
 					  <input type="hidden" name="xsdrel_xsdmf_id" value="{$xsdmf_id}">
 					  <input type="hidden" name="xsdrel_xdis_id" value="{$xdis_id}">
					  {if $smarty.get.xsdref_cat == 'edit'}
					  <input type="hidden" name="form_cat" value="update">
					  {else}
					  <input type="hidden" name="form_cat" value="new">
					  {/if}
					  <tr>
						<td colspan="2" class="default">
						  <b>Manage XSD Display References</b>
						</td>
					  </tr>
					  {if $result != ""}
					  <tr>
						<td colspan="2" bgcolor="{$cell_color}" align="center" class="error">
						  {if $smarty.post.form_cat == "new"}
							{if $result == -1}
							  An error occurred while trying to add the new xsd display.
							{elseif $result == 1}
							  Thank you, the xsd display was added successfully.
							{/if}
						  {elseif $smarty.post.form_cat == "update"}
							{if $result == -1}
							  An error occurred while trying to update the xsd display information.
							{elseif $result == 1}
							  Thank you, the xsd display was updated successfully.
							{/if}
						  {/if}
						</td>
					  </tr>
					  {/if}
					  <tr>
						<td width="120" bgcolor="{$cell_color}" class="default">
						  <b>XSD Display:</b>
						</td>
						<td bgcolor="{$light_color}">
						<select class="default" name="xsd_display_id">
						  {html_options options=$xsd_reference_displays}
						</select>

						 <!-- <input type="text" name="xdis_title" size="40" class="default" value="{$info.xdis_title}"> -->
						  {include file="error_icon.tpl.html" field="title"}
						</td>
					  </tr>
					  <tr>
						<td width="120" bgcolor="{$cell_color}" class="default">
						  <b>Order:</b>
						</td>
						<td bgcolor="{$light_color}">
						  <input type="text" name="xsdrel_order" size="20" class="default">
						  {include file="error_icon.tpl.html" field="xsdrel_order"}
						</td>
					  </tr>
					  <tr>
						<td colspan="2" bgcolor="{$cell_color}" align="center">
						  {if $smarty.get.xsdref_cat == 'edit'}
						  <input class="button" type="submit" value="Update XSD Display Reference">
						  {else}
						  <input class="button" type="submit" value="Add XSD Display Reference">
						  {/if}
						  <input class="button" type="reset" value="Reset">
						</td>
					  </tr>
					  </form>
					  <tr>
						<td colspan="2" class="default">
						  <b>Existing XSD Display References:</b>
						</td>
					  </tr>
					  <tr>
						<td colspan="2">
						  <table border="0" width="100%" cellpadding="1" cellspacing="1">
							<form onSubmit="javascript:return checkDelete(this);" method="post" action="{$smarty.server.PHP_SELF}">
				            <input type="hidden" name="xdis_id" value="{$xdis_id}">
				            <input type="hidden" name="xml_element" value="{$xml_element}">
				            <input type="hidden" name="xsdsel_id" value="{$xsdsel_id}">
						    <input type="hidden" name="form_name" value="xsdrel_delete">
							<input type="hidden" name="form_cat" value="delete">
							<input type="hidden" name="xsdrel_xsdmf_id" value="{$xsdrel_xsdmf_id}">
							<tr>
							  <td width="5" bgcolor="{$cell_color}" nowrap align="center"><input type="button" value="All" class="shortcut" onClick="javascript:toggleSelectAll(this.form, 'items[]');"></td>
							  <td width="50%" bgcolor="{$cell_color}" class="default">&nbsp;<b>Title</b></td>
							  <td width="15%" bgcolor="{$cell_color}" class="default">&nbsp;<b>Version</b></td>
							  <td width="15%" bgcolor="{$cell_color}" class="default">&nbsp;<b>Order</b></td>
							  <td width="15%" bgcolor="{$cell_color}" class="default" nowrap>&nbsp;<b>XSD HTML Matching Editor&nbsp;</b></td>
							</tr>
							{section name="i" loop=$xsd_display_ref_list}
							{cycle values=$cycle assign="row_color"}
							<tr>
							  <td width="4" nowrap bgcolor="{$row_color}" align="center">
								<input type="checkbox" name="items[]" value="{$xsd_display_ref_list[i].xsdrel_id}" {if $smarty.section.i.total == 0}disabled{/if}>
							  </td>
							  <td width="50%" bgcolor="{$row_color}" class="default">
								&nbsp;<a href="xsd_tree_match_form.php?xdis_id={$xdis_id}&xml_element={$xml_element}&xsdsel_id={$xsdsel_id}&xsdref_cat=edit&xsdrel_id={$xsd_display_ref_list[i].xsdrel_id}">{$xsd_display_ref_list[i].xdis_title}</a>
							  </td>
							  <td width="15%" bgcolor="{$row_color}" class="default">
								&nbsp;{$xsd_display_ref_list[i].xdis_version}
							  </td>
							  <td width="15%" bgcolor="{$row_color}" class="default">
								&nbsp;{$xsd_display_ref_list[i].xsdrel_order}
							  </td>
							  <td width="15%" bgcolor="{$row_color}" class="default">
								&nbsp;<a class="link" href="xsd_tree_match.php?&xdis_id={$xsd_display_ref_list[i].xdis_id}" title="match this XSD Display against HTML elements">Edit</a>
							  </td>
							</tr>
							{sectionelse}
							<tr>
							  <td colspan="5" bgcolor="{$light_color}" align="center" class="default">
								No xsd display references could be found.
								<input type="hidden" id="no_xsd_refs" name="no_xsd_refs" value="true">
							  </td>
							</tr>
							{/section}
							<tr>
							  <td width="4" align="center" bgcolor="{$cell_color}">
								<input type="button" value="All" class="shortcut" onClick="javascript:toggleSelectAll(this.form, 'items[]');">
							  </td>
							  <td colspan="5" bgcolor="{$cell_color}">
								<input type="submit" value="Delete" class="button">
							  </td>
							</tr>
							</form>
						  </table>
						</td>
					  </tr>
					</table>
				  </td>
				</tr>
					</table>
				  {else}
					  <input type="hidden" id="no_xsd_refs" name="no_xsd_refs" value="true">
					  <font color="green" class="default"><strong>When you create this matching field entry a XSD References management panel will appear here for you to chose the XSD References.</strong></font>
				  {/if}
				  </td>
				</tr>

		<tr id="xsd_display_att_tr" {if $xsdmf_id == ''}style="display:none"{/if}>
			<td>
		    {if $form_cat == 'edit'}		
			  <table width="100%" bgcolor="{$cell_color}" border="0" cellspacing="0" cellpadding="1" align="center">
				<tr>
				  <td>
					<table bgcolor="#FFFFFF" width="100%" cellspacing="1" cellpadding="2" border="0">
					  <form name="xsd_display_att_form" method="post" action="{$smarty.server.PHP_SELF}">
					  <a id="att_main"/>
		              <input type="hidden" name="xdis_id" value="{$xdis_id}">
 		              <input type="hidden" name="xml_element" value="{$xml_element}">
		              <input type="hidden" name="xsdsel_id" value="{$xsdsel_id}">
 					  <input type="hidden" name="form_name" value="att_main">
 					  <input type="hidden" name="att_parent_xsdmf_id" value="{$xsdmf_id}">
 					  <input type="hidden" name="att_child_xdis_id" value="{$att_child_xsdmf_id}">
					  {if $smarty.get.xsdref_cat == 'edit'}
					  <input type="hidden" name="form_cat" value="update">
					  {else}
					  <input type="hidden" name="form_cat" value="new">
					  {/if}
					  <tr>
						<td colspan="2" class="default">
						  <b>Manage XSD Display Attachments</b>
						</td>
					  </tr>
					  {if $result != ""  && $smarty.post.form_name == "att_main"}
					  <tr>
						<td colspan="2" bgcolor="{$cell_color}" align="center" class="error">
						  {if $smarty.post.form_cat == "new"}
							{if $result == -1}
							  An error occurred while trying to add the new xsd display attachment.
							{elseif $result == 1}
							  Thank you, the xsd display attachment was added successfully.
							{/if}
						  {elseif $smarty.post.form_cat == "update"}
							{if $result == -1}
							  An error occurred while trying to update the xsd display attachment information.
							{elseif $result == 1}
							  Thank you, the xsd display attachment was updated successfully.
							{/if}
						  {/if}
						</td>
					  </tr>
					  {/if}
					<tr id="tr_att_xdis_id">
					  <td bgcolor="{$cell_color}" class="default">
						<b>XSD Display</b>
					  </td>
					  <td bgcolor="{$light_color}">
						<select class="default" name="att_xdis_id" onChange="javascript: selectXSDDisplay(this.form, 'att_xdis_id', 'att_child_xsdmf_id', 0)">
						 {html_options options=$xsd_displays selected=$xdis_id}
						</select>
					  </td>
					</tr>
					<tr id="tr_att_child_xsdmf_id">
					  <td bgcolor="{$cell_color}" class="default">
						<b>XSD Matching Field</b>
					  </td>
					  <td bgcolor="{$light_color}">
						<div id="loading1" style="display:none;">Loading...</div>
						<select class="default" name="att_child_xsdmf_id" >
						</select>
					  </td>
					</tr>
					  <tr>
						<td width="120" bgcolor="{$cell_color}" class="default">
						  <b>Order:</b>
						</td>
						<td bgcolor="{$light_color}">
						  <input type="text" name="att_order" size="20" class="default">
						  {include file="error_icon.tpl.html" field="att_order"}
						</td>
					  </tr>
					  <tr>
						<td colspan="2" bgcolor="{$cell_color}" align="center">
						  {if $smarty.get.att_cat == 'edit'}
						  <input class="button" type="submit" value="Update XSD Display Attachment">
						  {else}
						  <input class="button" type="submit" value="Add XSD Display Attachment">
						  {/if}
						  <input class="button" type="reset" value="Reset">
						</td>
					  </tr>
					  </form>
					  <tr>
						<td colspan="2" class="default">
						  <b>Existing XSD Display Attachments:</b>
						</td>
					  </tr>
					  <tr>
						<td colspan="2">
						  <table border="0" width="100%" cellpadding="1" cellspacing="1">
							<form name="att_form_delete" onSubmit="javascript:return checkDelete(this);" method="post" action="{$smarty.server.PHP_SELF}">							
				            <input type="hidden" name="xdis_id" value="{$xdis_id}">
				            <input type="hidden" name="xml_element" value="{$xml_element}">
				            <input type="hidden" name="xsdsel_id" value="{$xsdsel_id}">
						    <input type="hidden" name="form_name" value="att_delete">
							<input type="hidden" name="form_cat" value="delete">
							<input type="hidden" name="att_parent_xsdmf_id" value="{$att_parent_xsdmf_id}">
							<tr>
							  <td width="5" bgcolor="{$cell_color}" nowrap align="center"><input type="button" value="All" class="shortcut" onClick="javascript:toggleSelectAll(this.form, 'items[]');"></td>
							  <td width="15%" bgcolor="{$cell_color}" class="default">&nbsp;<b>XSD Display</b></td>
							  <td width="15%" bgcolor="{$cell_color}" class="default">&nbsp;<b>Version</b></td>
							  <td width="55%" bgcolor="{$cell_color}" class="default">&nbsp;<b>XSDMF ID/Element</b></td>
							  <td width="15%" bgcolor="{$cell_color}" class="default">&nbsp;<b>Order</b></td>
							</tr>
							{section name="i" loop=$xsd_display_att_list}
							{cycle values=$cycle assign="row_color"}
							<tr>
							  <td width="4" nowrap bgcolor="{$row_color}" align="center">
								<input type="checkbox" name="items[]" value="{$xsd_display_att_list[i].att_id}" {if $smarty.section.i.total == 0}disabled{/if}>
							  </td>
							  <td width="15%" bgcolor="{$row_color}" class="default">
								&nbsp;{$xsd_display_att_list[i].xdis_title}
							  </td>
							  <td width="15%" bgcolor="{$row_color}" class="default">
								&nbsp;{$xsd_display_att_list[i].xdis_version}
							  </td>
							  <td width="55%" bgcolor="{$row_color}" class="default">
								&nbsp;<a href="xsd_tree_match_form.php?xdis_id={$xdis_id}&xml_element={$xml_element}&xsdsel_id={$xsdsel_id}&att_cat=edit&att_id_edit={$xsd_display_att_list[i].att_id}">({$xsd_display_att_list[i].xsdmf_id}){if $xsd_display_att_list[i].xsdsel_title != ""}({$xsd_display_att_list[i].xsdsel_title}){/if}{$xsd_display_att_list[i].xsdmf_element}</a>
							  </td>
							  <td width="15%" bgcolor="{$row_color}" class="default">
								&nbsp;{$xsd_display_att_list[i].att_order}
							  </td>
							</tr>
							{sectionelse}
							<tr>
							  <td colspan="5" bgcolor="{$light_color}" align="center" class="default">
								No xsd display attachments could be found.
								<input type="hidden" id="no_xsd_atts" name="no_xsd_atts" value="true">
							  </td>
							</tr>
							{/section}
							<tr>
							  <td width="4" align="center" bgcolor="{$cell_color}">
								<input type="button" value="All" class="shortcut" onClick="javascript:toggleSelectAll(this.form, 'items[]');">
							  </td>
							  <td colspan="5" bgcolor="{$cell_color}">
								<input type="submit" value="Delete" class="button">
							  </td>
							</tr>
							</form>
						  </table>
						</td>
					  </tr>
					</table>
				  </td>
				</tr>
					</table>
				  {else}
					  <input type="hidden" id="no_xsd_atts" name="no_xsd_atts" value="true">
					  <font color="green" class="default"><strong>When you create this matching field entry a XSD Attachments management panel will appear here for you to chose the XSD Attachments.</strong></font>
				  {/if}
				  </td>
				</tr>

				<tr id="xsd_loop_subelement_tr" {if $info.xsdmf_html_input != 'xsd_loop_subelement'}style="display:none"{/if}>
					<td>
					 {if $form_cat == 'edit'}
					  <table width="100%" bgcolor="{$cell_color}" border="0" cellspacing="0" cellpadding="1" align="center">
						<tr>
						  <td>
							<table bgcolor="#FFFFFF" width="100%" cellspacing="1" cellpadding="2" border="0">
							  <form name="xsd_loop_subelement_form" method="post" action="{$smarty.server.PHP_SELF}">
							  <a id="xsd_loop_subelement_form"/>
							  <input type="hidden" name="xdis_id" value="{$xdis_id}">
							  <input type="hidden" name="xml_element" value="{$xml_element}">
				              <input type="hidden" name="xsdsel_id" value="{$xsdsel_id}">
			                  <input type="hidden" name="xsdsel_id_edit" value="{$xsdsel_id_edit}">
							  <input type="hidden" name="form_name" value="xsdsel_main">
							  <input type="hidden" name="xsdsel_xsdmf_id" value="{$xsdmf_id}">
							  <input type="hidden" name="xsdsel_xdis_id" value="{$xdis_id}">
							  {if $smarty.get.xsdsel_cat == 'edit'}
							  <input type="hidden" name="form_cat" value="update">
							  {else}
							  <input type="hidden" name="form_cat" value="new">
							  {/if}
							  <tr>
								<td colspan="2" class="default">
								  <b>Manage XSD Looping Subelements</b>
								</td>
							  </tr>
							  {if $result != "" && $smarty.post.form_name == "xsdsel_main"}
							  <tr>
								<td colspan="2" bgcolor="{$cell_color}" align="center" class="error">
								  {if $smarty.post.form_cat == "new"}
									{if $result == -1}
									  An error occurred while trying to add the new xsd looping subelement.
									{elseif $result == 1}
									  Thank you, the xsd looping subelement was added successfully.
									{/if}
								  {elseif $smarty.post.form_cat == "update"}
									{if $result == -1}
									  An error occurred while trying to update the xsd looping subelement.
									{elseif $result == 1}
									  Thank you, the xsd looping subelement was updated successfully.
									{/if}
								  {/if}
								</td>
							  </tr>
							  {/if}
							  <tr>
								<td width="120" bgcolor="{$cell_color}" class="default">
								  <b>XSD Subelement Loop Title:</b>
								</td>
								<td bgcolor="{$light_color}">
								 <input type="text" name="xsdsel_title" size="20" class="default" value="{$xsd_loop_subelement_details.xsdsel_title}">		
								  {include file="error_icon.tpl.html" field="title"}
								</td>
							  </tr>
							  <tr>
								<td width="120" bgcolor="{$cell_color}" class="default">
								  <b>Subelement Loop Type:</b>
								</td>
								<td bgcolor="{$light_color}">
								<select class="default" name="xsdsel_type" {literal}onChange="javascript:if(this.form.xsdsel_type.value=='attributeloop'){toggleXSDSEL_loop(true);}else{toggleXSDSEL_loop(false);}">{/literal}
								  <option value="hardset" {if $xsd_loop_subelement_details.xsdsel_type == 'hardset'}selected{/if}>Hardset (One Loop)</option>
								  <option value="attributeloop"  {if $xsd_loop_subelement_details.xsdsel_type == 'attributeloop'}selected{/if}>Loop on Element or Attribute</option>
								</select>
								</td>
							  </tr>
							  <tr id="tr_xsdsel_attribute_loop_xsdmf_id" {if $xsd_loop_subelement_details.xsdsel_type != 'attributeloop'}style="display:none"{/if}>
								<td width="120" bgcolor="{$cell_color}" class="default">
								  <b>Loop on Matching Field:</b>
								</td>
								<td bgcolor="{$light_color}" nowrap>

									{if $xsd_loop_subelement_details.xsdsel_attribute_loop_xdis_id == '' ||  $xsd_loop_subelement_details.xsdsel_attribute_loop_xdis_id == 0}
					                  {assign var="loop_mf_xdis_id" value=$xdis_id}
									{else}
									  {assign var="loop_mf_xdis_id" value=$xsd_loop_subelement_details.xsdsel_attribute_loop_xdis_id}
									{/if}
									<select class="default" name="xsdsel_attribute_loop_xdis_id" onChange="javascript: selectXSDDisplay(this.form, 'xsdsel_attribute_loop_xdis_id', 'xsdsel_attribute_loop_xsdmf_id', {if $xsd_loop_subelement_details.xsdsel_attribute_loop_xsdmf_id}{$xsd_loop_subelement_details.xsdsel_attribute_loop_xsdmf_id}{else}0{/if}); ">
									 {html_options options=$xsd_displays selected=$loop_mf_xdis_id}
									</select>


									<div id="loading5" style="display:none;">Loading...</div>
									<select class="default" name="xsdsel_attribute_loop_xsdmf_id">
									</select>
								</td>
							  </tr>
							  <tr>
								<td width="120" bgcolor="{$cell_color}" class="default">
								  <b>Order:</b>
								</td>
								<td bgcolor="{$light_color}">
								  <input type="text" name="xsdsel_order" size="20" class="default" value="{$xsd_loop_subelement_details.xsdsel_order}">
								  {include file="error_icon.tpl.html" field="xsdsel_order"}
								</td>
							  </tr>
							  <tr>
								<td colspan="2" bgcolor="{$cell_color}" align="center">
								  {if $smarty.get.xsdsel_cat == 'edit'}
								  <input class="button" type="submit" value="Update XSD Looping Subelement">
								  {else}
								  <input class="button" type="submit" value="Add XSD Looping Subelement">
								  {/if}
								  <input class="button" type="reset" value="Reset">
								</td>
							  </tr>
							  </form>
							  <tr>
								<td colspan="2" class="default">
								  <b>Existing XSD Looping Subelements:</b>
								</td>
							  </tr>
							  <tr>
								<td colspan="2">
								  <table border="0" width="100%" cellpadding="1" cellspacing="1">
									<form onSubmit="javascript:return checkDelete(this);" method="post" action="{$smarty.server.PHP_SELF}">
									<input type="hidden" name="xdis_id" value="{$xdis_id}">
									<input type="hidden" name="xml_element" value="{$xml_element}">
						            <input type="hidden" name="xsdsel_id_edit" value="{$xsdsel_id_edit}">
									<input type="hidden" name="form_name" value="xsdsel_delete">
									<input type="hidden" name="form_cat" value="delete">
									<input type="hidden" name="xsdsel_xsdmf_id" value="{$xsdsel_xsdmf_id}">
									<tr>
									  <td width="5" bgcolor="{$cell_color}" nowrap align="center"><input type="button" value="All" class="shortcut" onClick="javascript:toggleSelectAll(this.form, 'items[]');"></td>
									  <td width="50%" bgcolor="{$cell_color}" class="default">&nbsp;<b>Title</b></td>
									  <td width="15%" bgcolor="{$cell_color}" class="default">&nbsp;<b>Type</b></td>
									  <td width="15%" bgcolor="{$cell_color}" class="default">&nbsp;<b>Order</b></td>
									  <td width="15%" bgcolor="{$cell_color}" class="default">&nbsp;<b>Loop on Matching Field</b></td>
									</tr>
									{section name="i" loop=$xsd_loop_subelement_list}
									{cycle values=$cycle assign="row_color"}
									<tr>
									  <td width="4" nowrap bgcolor="{$row_color}" align="center">
										<input type="checkbox" name="items[]" value="{$xsd_loop_subelement_list[i].xsdsel_id}" {if $smarty.section.i.total == 0}disabled{/if}>
									  </td>
									  <td width="50%" bgcolor="{$row_color}" class="default">
										&nbsp;<a href="xsd_tree_match_form.php?xdis_id={$xdis_id}&xml_element={$xml_element}&xsdsel_id={$xsdsel_id}&xsdsel_cat=edit&xsdsel_id_edit={$xsd_loop_subelement_list[i].xsdsel_id}">{$xsd_loop_subelement_list[i].xsdsel_title}</a>
									  </td>
									  <td width="15%" bgcolor="{$row_color}" class="default">
										&nbsp;{$xsd_loop_subelement_list[i].xsdsel_type}
									  </td>
									  <td width="15%" bgcolor="{$row_color}" class="default">
										&nbsp;{$xsd_loop_subelement_list[i].xsdsel_order}
									  </td>
									  <td width="15%" bgcolor="{$row_color}" class="default">
										&nbsp;{if $xsd_loop_subelement_list[i].xsdsel_type == 'attributeloop'}{$xsd_loop_subelement_list[i].xsdsel_attribute_loop_xsdmf_id}{else}N/A{/if}
									  </td>

									</tr>
									{sectionelse}
									<tr>
									  <td colspan="6" bgcolor="{$light_color}" align="center" class="default">
										No xsd looping subelements could be found.
										<input type="hidden" id="no_xsd_looping_subelements" name="no_xsd_looping_subelements" value="true">
									  </td>
									</tr>
									{/section}
									<tr>
									  <td width="4" align="center" bgcolor="{$cell_color}">
										<input type="button" value="All" class="shortcut" onClick="javascript:toggleSelectAll(this.form, 'items[]');">
									  </td>
									  <td colspan="5" bgcolor="{$cell_color}">
										<input type="submit" value="Delete" class="button">
									  </td>
									</tr>
									</form>
								  </table>
								</td>
							  </tr>
							</table>
				  {else}
					  <input type="hidden" id="no_xsd_looping_subelements" name="no_xsd_looping_subelements" value="true">
					  <font color="green" class="default"><strong>When you create this matching field entry a XSD Looping Subelements management panel will appear here for you to chose the XSD Looping Subelements.</strong></font>
				  {/if}
						  </td>
					    </tr>


					  </table>

				    </td>

				  </tr>

			    </table>
      {literal}
      <script language="JavaScript">
      <!--
dt_load_array['att_child_xsdmf_id'] = 0;
dt_load_array['xsdsel_attribute_loop_xsdmf_id'] = 0;
dt_load_array['xsdmf_id_ref'] = 0;
{/literal}{if $form_cat == 'edit'}{literal}
	  selectXSDDisplay(getForm('xsd_display_att_form'), 'att_xdis_id', 'att_child_xsdmf_id', {/literal}{if $xsd_attach_details.att_child_xsdmf_id}{$xsd_attach_details.att_child_xsdmf_id}{else}0{/if}{literal}); 
	  selectXSDDisplay(getForm('xsd_loop_subelement_form'), 'xsdsel_attribute_loop_xdis_id', 'xsdsel_attribute_loop_xsdmf_id', {/literal}{if $xsd_loop_subelement_details.xsdsel_attribute_loop_xsdmf_id}{$xsd_loop_subelement_details.xsdsel_attribute_loop_xsdmf_id}{else}0{/if}{literal}); 
{/literal}{/if}{literal}
	  selectXSDDisplay(getForm('xsd_tree_match_form'), 'xsdmf_xdis_id_ref', 'xsdmf_id_ref', {/literal}{if $info.xsdmf_id_ref}{$info.xsdmf_id_ref}{else}0{/if}{literal}); 
	  window.onload = setXSDMatchField();
      function setXSDMatchField()
      {
          var field1 = getFormElement(getForm('xsd_tree_match_form'), 'field_type', 0);
          if (field1.checked) {
              toggleXSDMatchField(true);
          } else {
              toggleXSDMatchField(false);
          }
      }
	  {/literal}{if $anchor != ""}document.location.href='{$anchor}';{/if}{literal}
      //-->
      </script>
      {/literal}

{/if}
{include file="footer.tpl.html"}
