
{literal}
<script language="JavaScript">
<!--
function updateCustomFields(issue_id)
{
    var features = 'width=700,height=600,top=30,left=30,resizable=no,scrollbars=yes,toolbar=no,location=no,menubar=no,status=no';
    var customWin = window.open('custom_fields.php?issue_id=' + issue_id, '_custom_fields', features);
    customWin.focus();
}
//-->
</script>
{/literal}
<br />
<table width="100%" bgcolor="{$cell_color}" border="0" cellspacing="0" cellpadding="1" align="center">
  <form method="get" action="{$smarty.server.PHP_SELF}">
  <tr>
    <td width="100%">
      <table bgcolor="#FFFFFF" width="100%" cellspacing="1" cellpadding="2" border="0">
        <tr>
          <td class="default" nowrap>
            <b>Issue Custom Details</b>
          </td>
          <td align="right" class="default">
            {if $browser.ie5up or $browser.ns6up or $browser.gecko}
            [ <a id="custom_fields_link" class="link" href="javascript:void(null);" onClick="javascript:toggleVisibility('custom_fields');">{get_innerhtml element_name="custom_fields"}</a> ]
            {/if}
          </td>
        </tr>
        <tr id="custom_fields1" {get_display_style element_name="custom_fields"}>
          <td colspan="2">
            <table width="100%" cellpadding="2" cellspacing="1">
              {section name="i" loop=$custom_fields}
              {cycle values=$cycle assign="row_color"}
              <tr>
                <td bgcolor="{$cell_color}" class="default_white">
                  <nobr><b>{$custom_fields[i].fld_title}:</b>&nbsp;</nobr>
                </td>
                <td class="default" width="100%" bgcolor="{$row_color}">
                  {$custom_fields[i].icf_value|escape:"html"|nl2br}
                </td>
              </tr>
              {sectionelse}
              <tr>
                <td colspan="2" bgcolor="{$light_color}" align="center" class="default">
                  <i>No custom fields could be found.</i>
                </td>
              </tr>
              {/section}
              {if ($current_role > $roles.reporter || $is_user_assigned == 'true') and $custom_fields != ""}
              <tr id="custom_fields2" {get_display_style element_name="custom_fields"}>
                <td align="center" colspan="2" bgcolor="{$cell_color}">
                  <input class="button" type="button" value="Update" onClick="javascript:updateCustomFields({$smarty.get.id});">
                </td>
              </tr>
              {/if}
            </table>
          </td>
        </tr>
      </table>
    </td>
  </tr>
  </form>
</table>

